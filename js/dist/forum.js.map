{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@flamarkt/identity/webpack/bootstrap","webpack://@flamarkt/identity/webpack/runtime/compat get default export","webpack://@flamarkt/identity/webpack/runtime/define property getters","webpack://@flamarkt/identity/webpack/runtime/hasOwnProperty shorthand","webpack://@flamarkt/identity/webpack/runtime/make namespace object","webpack://@flamarkt/identity/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@flamarkt/identity/external root \"flarum.core.compat['forum/app']\"","webpack://@flamarkt/identity/external root \"flarum.core.compat['common/extend']\"","webpack://@flamarkt/identity/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@flamarkt/identity/external root \"((flarum.extensions['flamarkt-core']||{})['forum']||{})['utils/AccountControls']\"","webpack://@flamarkt/identity/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@flamarkt/identity/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flamarkt/identity/external root \"((flarum.extensions['flamarkt-core']||{})['forum']||{})['pages/AbstractAccountPage']\"","webpack://@flamarkt/identity/external root \"flarum.core.compat['common/components/Button']\"","webpack://@flamarkt/identity/./src/common/states/IdentityFieldsState.ts","webpack://@flamarkt/identity/external root \"flarum.core.compat['common/Component']\"","webpack://@flamarkt/identity/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@flamarkt/identity/external root \"flarum.core.compat['common/app']\"","webpack://@flamarkt/identity/./src/forum/components/IdentityFields.ts","webpack://@flamarkt/identity/./src/common/identityFields.ts","webpack://@flamarkt/identity/./src/forum/pages/IdentityPage.ts","webpack://@flamarkt/identity/external root \"flarum.core.compat['forum/components/SignUpModal']\"","webpack://@flamarkt/identity/external root \"flarum.core.compat['common/models/User']\"","webpack://@flamarkt/identity/external root \"flarum.core.compat['common/Model']\"","webpack://@flamarkt/identity/./src/forum/index.ts","webpack://@flamarkt/identity/./src/common/addUserAttributes.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-core']||{})['forum']||{})['utils/AccountControls'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-core']||{})['forum']||{})['pages/AbstractAccountPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import User from 'flarum/common/models/User';\n\nexport default class IdentityFieldsState {\n    firstname: string = '';\n    lastname: string = '';\n    birthday: string = '';\n    addressStreet: string = '';\n    addressNumber: string = '';\n    addressCity: string = '';\n    addressZip: string = '';\n    addressState: string = '';\n    addressCountry: string = '';\n\n    valuesFromUser(user: User) {\n        this.firstname = user.firstname() || '';\n        this.lastname = user.lastname() || '';\n        this.birthday = user.birthday() || '';\n        this.addressStreet = user.addressStreet() || '';\n        this.addressNumber = user.addressNumber() || '';\n        this.addressCity = user.addressCity() || '';\n        this.addressZip = user.addressZip() || '';\n        this.addressState = user.addressState() || '';\n        this.addressCountry = user.addressCountry() || '';\n    }\n\n    data(): any {\n        return {\n            firstname: this.firstname,\n            lastname: this.lastname,\n            birthday: this.birthday,\n            addressStreet: this.addressStreet,\n            addressNumber: this.addressNumber,\n            addressCity: this.addressCity,\n            addressZip: this.addressZip,\n            addressState: this.addressState,\n            addressCountry: this.addressCountry,\n        };\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import {Children} from 'mithril';\nimport Component, {ComponentAttrs} from 'flarum/common/Component';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport IdentityFieldsState from '../../common/states/IdentityFieldsState';\nimport identityFields from '../../common/identityFields';\n\ninterface IdentityFieldsAttrs extends ComponentAttrs {\n    state: IdentityFieldsState\n    onchange: () => void\n}\n\nexport default class IdentityFields extends Component<IdentityFieldsAttrs> {\n    view() {\n        return this.fields().toArray();\n    }\n\n    fields(): ItemList<Children> {\n        const {state, onchange} = this.attrs;\n\n        return identityFields(new ItemList<Children>(), state, onchange);\n    }\n}\n","import app from 'flarum/common/app';\nimport {Children} from 'mithril';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport IdentityFieldsState from './states/IdentityFieldsState';\n\nexport default function (items: ItemList<Children>, state: IdentityFieldsState, onchange: () => void): ItemList<Children> {\n    items.add('firstname', m('.Form-group', [\n        m('label', {\n            for: 'settings-firstname',\n        }, app.translator.trans('flamarkt-identity.lib.field.firstname')),\n        m('input.FormControl', {\n            id: 'settings-firstname',\n            type: 'text',\n            value: state.firstname,\n            oninput: (event: Event) => {\n                state.firstname = (event.target as HTMLInputElement).value;\n                onchange();\n            },\n        }),\n    ]));\n\n    items.add('lastname', m('.Form-group', [\n        m('label', {\n            for: 'settings-lastname',\n        }, app.translator.trans('flamarkt-identity.lib.field.lastname')),\n        m('input.FormControl', {\n            id: 'settings-lastname',\n            type: 'text',\n            value: state.lastname,\n            oninput: (event: Event) => {\n                state.lastname = (event.target as HTMLInputElement).value;\n                onchange();\n            },\n        }),\n    ]));\n\n    items.add('birthday', m('.Form-group', [\n        m('label', {\n            for: 'settings-birthday',\n        }, app.translator.trans('flamarkt-identity.lib.field.birthday')),\n        m('input.FormControl', {\n            id: 'settings-birthday',\n            type: 'date',\n            value: state.birthday,\n            oninput: (event: Event) => {\n                state.birthday = (event.target as HTMLInputElement).value;\n                onchange();\n            },\n        }),\n    ]));\n\n    items.add('addressStreet', m('.Form-group', [\n        m('label', {\n            for: 'settings-addressStreet',\n        }, app.translator.trans('flamarkt-identity.lib.field.addressStreet')),\n        m('input.FormControl', {\n            id: 'settings-addressStreet',\n            type: 'text',\n            value: state.addressStreet,\n            oninput: (event: Event) => {\n                state.addressStreet = (event.target as HTMLInputElement).value;\n                onchange();\n            },\n        }),\n    ]));\n\n    items.add('addressNumber', m('.Form-group', [\n        m('label', {\n            for: 'settings-addressNumber',\n        }, app.translator.trans('flamarkt-identity.lib.field.addressNumber')),\n        m('input.FormControl', {\n            id: 'settings-addressNumber',\n            type: 'text',\n            value: state.addressNumber,\n            oninput: (event: Event) => {\n                state.addressNumber = (event.target as HTMLInputElement).value;\n                onchange();\n            },\n        }),\n    ]));\n\n    items.add('addressCity', m('.Form-group', [\n        m('label', {\n            for: 'settings-addressCity',\n        }, app.translator.trans('flamarkt-identity.lib.field.addressCity')),\n        m('input.FormControl', {\n            id: 'settings-addressCity',\n            type: 'text',\n            value: state.addressCity,\n            oninput: (event: Event) => {\n                state.addressCity = (event.target as HTMLInputElement).value;\n                onchange();\n            },\n        }),\n    ]));\n\n    items.add('addressZip', m('.Form-group', [\n        m('label', {\n            for: 'settings-addressZip',\n        }, app.translator.trans('flamarkt-identity.lib.field.addressZip')),\n        m('input.FormControl', {\n            id: 'settings-addressZip',\n            type: 'text',\n            value: state.addressZip,\n            oninput: (event: Event) => {\n                state.addressZip = (event.target as HTMLInputElement).value;\n                onchange();\n            },\n        }),\n    ]));\n\n    items.add('addressState', m('.Form-group', [\n        m('label', {\n            for: 'settings-addressState',\n        }, app.translator.trans('flamarkt-identity.lib.field.addressState')),\n        m('input.FormControl', {\n            id: 'settings-addressState',\n            type: 'text',\n            value: state.addressState,\n            oninput: (event: Event) => {\n                state.addressState = (event.target as HTMLInputElement).value;\n                onchange();\n            },\n        }),\n    ]));\n\n    items.add('addressCountry', m('.Form-group', [\n        m('label', {\n            for: 'settings-addressCountry',\n        }, app.translator.trans('flamarkt-identity.lib.field.addressCountry')),\n        m('input.FormControl', {\n            id: 'settings-addressCountry',\n            type: 'text',\n            value: state.addressCountry,\n            oninput: (event: Event) => {\n                state.addressCountry = (event.target as HTMLInputElement).value;\n                onchange();\n            },\n        }),\n    ]));\n\n    return items;\n}\n","import {Vnode} from 'mithril';\nimport app from 'flarum/forum/app';\nimport AbstractAccountPage from 'flamarkt/core/forum/pages/AbstractAccountPage';\nimport Button from 'flarum/common/components/Button';\nimport IdentityFieldsState from '../../common/states/IdentityFieldsState';\nimport IdentityFields from '../components/IdentityFields';\n\nexport default class IdentityPage extends AbstractAccountPage {\n    state: IdentityFieldsState = new IdentityFieldsState();\n    dirty: boolean = false;\n    saving: boolean = false;\n\n    oninit(vnode: Vnode) {\n        super.oninit(vnode);\n\n        if (app.session.user) {\n            this.state.valuesFromUser(app.session.user);\n        }\n    }\n\n    breadcrumbItems() {\n        const items = super.breadcrumbItems();\n\n        items.add('current', m('span.breadcrumb-current', 'Identity'));\n\n        return items;\n    }\n\n    content() {\n        return m('form', {\n            onsubmit: this.onsubmit.bind(this),\n        }, [\n            IdentityFields.component({\n                state: this.state,\n                onchange: () => {\n                    this.dirty = true;\n                },\n            }),\n            m('.Form-group', Button.component({\n                type: 'submit',\n                className: 'Button Button--primary',\n                loading: this.saving,\n                disabled: !this.dirty,\n            }, app.translator.trans('flamarkt-identity.forum.settings.submit'))),\n        ]);\n    }\n\n    data(): any {\n        return {\n            ...this.state.data(),\n        };\n    }\n\n    onsubmit(event: Event) {\n        event.preventDefault();\n\n        this.saving = true;\n\n        app.session.user.save(this.data()).then(() => {\n            this.saving = false;\n            this.dirty = false;\n\n            m.redraw();\n        }).catch(error => {\n            this.saving = false;\n\n            m.redraw();\n\n            throw error;\n        });\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SignUpModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import app from 'flarum/forum/app';\nimport {extend, override} from 'flarum/common/extend';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport AccountControls from 'flamarkt/core/forum/utils/AccountControls';\nimport IdentityPage from './pages/IdentityPage';\nimport SignUpModal from 'flarum/forum/components/SignUpModal';\nimport IdentityFields from './components/IdentityFields';\nimport IdentityFieldsState from '../common/states/IdentityFieldsState';\nimport addUserAttributes from '../common/addUserAttributes';\n\napp.initializers.add('flamarkt-identity', () => {\n    addUserAttributes();\n\n    app.routes['flamarkt.account.identity'] = {\n        path: '/account/identity',\n        component: IdentityPage,\n    };\n\n    extend(AccountControls, 'controls', function (items) {\n        items.add('identity', LinkButton.component({\n            href: app.route('flamarkt.account.identity'),\n        }, 'Identity'));\n    });\n\n    extend(SignUpModal.prototype, 'oninit', function () {\n        this.flamarktIdentityState = new IdentityFieldsState();\n    });\n\n    extend(SignUpModal.prototype, 'fields', function (fields) {\n        fields.add('flamarkt-identity', IdentityFields.component({\n            state: this.flamarktIdentityState,\n            onchange() {\n                //\n            },\n        }));\n    });\n\n    override(SignUpModal.prototype, 'submitData', function (original: any) {\n        return {\n            ...original(),\n            ...this.flamarktIdentityState.data(),\n        };\n    });\n});\n","import User from 'flarum/common/models/User';\nimport Model from 'flarum/common/Model';\n\nexport default function () {\n    User.prototype.firstname = Model.attribute('firstname');\n    User.prototype.lastname = Model.attribute('lastname');\n    User.prototype.birthday = Model.attribute('birthday');\n    User.prototype.addressStreet = Model.attribute('addressStreet');\n    User.prototype.addressNumber = Model.attribute('addressNumber');\n    User.prototype.addressCity = Model.attribute('addressCity');\n    User.prototype.addressZip = Model.attribute('addressZip');\n    User.prototype.addressState = Model.attribute('addressState');\n    User.prototype.addressCountry = Model.attribute('addressCountry');\n    //TODO: phone\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","_extends","assign","bind","target","i","arguments","length","source","apply","this","flarum","core","compat","extensions","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","IdentityFieldsState","firstname","lastname","birthday","addressStreet","addressNumber","addressCity","addressZip","addressState","addressCountry","valuesFromUser","user","data","IdentityFields","view","fields","toArray","attrs","state","onchange","items","add","m","for","app","id","type","oninput","event","identityFields","ItemList","Component","IdentityPage","dirty","saving","oninit","vnode","breadcrumbItems","content","onsubmit","component","Button","className","loading","disabled","preventDefault","then","redraw","error","AbstractAccountPage","User","Model","path","extend","AccountControls","LinkButton","href","SignUpModal","flamarktIdentityState","override","original"],"sourceRoot":""}