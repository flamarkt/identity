(()=>{var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var a in r)t.o(r,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},r.apply(this,arguments)}t.r(e);const a=flarum.core.compat["forum/app"];var s=t.n(a);const n=flarum.core.compat["common/extend"],o=flarum.core.compat["common/components/LinkButton"];var i=t.n(o);const d=((flarum.extensions["flamarkt-core"]||{}).forum||{})["utils/AccountControls"];var u=t.n(d);function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function p(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,l(t,e)}const c=((flarum.extensions["flamarkt-core"]||{}).forum||{})["pages/AbstractAccountPage"];var f=t.n(c);const y=flarum.core.compat["common/components/Button"];var b=t.n(y),h=function(){function t(){this.firstname="",this.lastname="",this.birthday="",this.addressStreet="",this.addressNumber="",this.addressCity="",this.addressZip="",this.addressState="",this.addressCountry=""}var e=t.prototype;return e.valuesFromUser=function(t){this.firstname=t.firstname()||"",this.lastname=t.lastname()||"",this.birthday=t.birthday()||"",this.addressStreet=t.addressStreet()||"",this.addressNumber=t.addressNumber()||"",this.addressCity=t.addressCity()||"",this.addressZip=t.addressZip()||"",this.addressState=t.addressState()||"",this.addressCountry=t.addressCountry()||""},e.data=function(){return{firstname:this.firstname,lastname:this.lastname,birthday:this.birthday,addressStreet:this.addressStreet,addressNumber:this.addressNumber,addressCity:this.addressCity,addressZip:this.addressZip,addressState:this.addressState,addressCountry:this.addressCountry}},t}();const g=flarum.core.compat["common/Component"];var v=t.n(g);const C=flarum.core.compat["common/utils/ItemList"];var S=t.n(C),F=function(t){function e(){return t.apply(this,arguments)||this}p(e,t);var r=e.prototype;return r.view=function(){return this.fields().toArray()},r.fields=function(){var t=this.attrs,e=t.state,r=t.onchange;return function(t,e,r){return t.add("firstname",m(".Form-group",[m("label",{for:"settings-firstname"},app.translator.trans("flamarkt-identity.lib.field.firstname")),m("input.FormControl",{id:"settings-firstname",type:"text",value:e.firstname,oninput:function(t){e.firstname=t.target.value,r()}})])),t.add("lastname",m(".Form-group",[m("label",{for:"settings-lastname"},app.translator.trans("flamarkt-identity.lib.field.lastname")),m("input.FormControl",{id:"settings-lastname",type:"text",value:e.lastname,oninput:function(t){e.lastname=t.target.value,r()}})])),t.add("birthday",m(".Form-group",[m("label",{for:"settings-birthday"},app.translator.trans("flamarkt-identity.lib.field.birthday")),m("input.FormControl",{id:"settings-birthday",type:"date",value:e.birthday,oninput:function(t){e.birthday=t.target.value,r()}})])),t.add("addressStreet",m(".Form-group",[m("label",{for:"settings-addressStreet"},app.translator.trans("flamarkt-identity.lib.field.addressStreet")),m("input.FormControl",{id:"settings-addressStreet",type:"text",value:e.addressStreet,oninput:function(t){e.addressStreet=t.target.value,r()}})])),t.add("addressNumber",m(".Form-group",[m("label",{for:"settings-addressNumber"},app.translator.trans("flamarkt-identity.lib.field.addressNumber")),m("input.FormControl",{id:"settings-addressNumber",type:"text",value:e.addressNumber,oninput:function(t){e.addressNumber=t.target.value,r()}})])),t.add("addressCity",m(".Form-group",[m("label",{for:"settings-addressCity"},app.translator.trans("flamarkt-identity.lib.field.addressCity")),m("input.FormControl",{id:"settings-addressCity",type:"text",value:e.addressCity,oninput:function(t){e.addressCity=t.target.value,r()}})])),t.add("addressZip",m(".Form-group",[m("label",{for:"settings-addressZip"},app.translator.trans("flamarkt-identity.lib.field.addressZip")),m("input.FormControl",{id:"settings-addressZip",type:"text",value:e.addressZip,oninput:function(t){e.addressZip=t.target.value,r()}})])),t.add("addressState",m(".Form-group",[m("label",{for:"settings-addressState"},app.translator.trans("flamarkt-identity.lib.field.addressState")),m("input.FormControl",{id:"settings-addressState",type:"text",value:e.addressState,oninput:function(t){e.addressState=t.target.value,r()}})])),t.add("addressCountry",m(".Form-group",[m("label",{for:"settings-addressCountry"},app.translator.trans("flamarkt-identity.lib.field.addressCountry")),m("input.FormControl",{id:"settings-addressCountry",type:"text",value:e.addressCountry,oninput:function(t){e.addressCountry=t.target.value,r()}})])),t}(new(S()),e,r)},e}(v()),k=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).state=new h,e.dirty=!1,e.saving=!1,e}p(e,t);var a=e.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),s().session.user&&this.state.valuesFromUser(s().session.user)},a.breadcrumbItems=function(){var e=t.prototype.breadcrumbItems.call(this);return e.add("current",m("span.breadcrumb-current","Identity")),e},a.content=function(){var t=this;return m("form",{onsubmit:this.onsubmit.bind(this)},[F.component({state:this.state,onchange:function(){t.dirty=!0}}),m(".Form-group",b().component({type:"submit",className:"Button Button--primary",loading:this.saving,disabled:!this.dirty},s().translator.trans("flamarkt-identity.forum.settings.submit")))])},a.data=function(){return r({},this.state.data())},a.onsubmit=function(t){var e=this;t.preventDefault(),this.saving=!0,s().session.user.save(this.data()).then((function(){e.saving=!1,e.dirty=!1,m.redraw()})).catch((function(t){throw e.saving=!1,m.redraw(),t}))},e}(f());const x=flarum.core.compat["forum/components/SignUpModal"];var N=t.n(x);const O=flarum.core.compat["common/models/User"];var Z=t.n(O);const j=flarum.core.compat["common/Model"];var w=t.n(j);s().initializers.add("flamarkt-identity",(function(){Z().prototype.firstname=w().attribute("firstname"),Z().prototype.lastname=w().attribute("lastname"),Z().prototype.birthday=w().attribute("birthday"),Z().prototype.addressStreet=w().attribute("addressStreet"),Z().prototype.addressNumber=w().attribute("addressNumber"),Z().prototype.addressCity=w().attribute("addressCity"),Z().prototype.addressZip=w().attribute("addressZip"),Z().prototype.addressState=w().attribute("addressState"),Z().prototype.addressCountry=w().attribute("addressCountry"),s().routes["flamarkt.account.identity"]={path:"/account/identity",component:k},(0,n.extend)(u(),"controls",(function(t){t.add("identity",i().component({href:s().route("flamarkt.account.identity")},"Identity"))})),(0,n.extend)(N().prototype,"oninit",(function(){this.flamarktIdentityState=new h})),(0,n.extend)(N().prototype,"fields",(function(t){t.add("flamarkt-identity",F.component({state:this.flamarktIdentityState,onchange:function(){}}))})),(0,n.override)(N().prototype,"submitData",(function(t){return r({},t(),this.flamarktIdentityState.data())}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map